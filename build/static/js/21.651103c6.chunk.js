(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{492:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"d",function(){return i}),a.d(t,"a",function(){return l}),a.d(t,"c",function(){return c}),a.d(t,"f",function(){return d}),a.d(t,"e",function(){return s}),a.d(t,"g",function(){return u});var n=a(2),o=a(37),r=function(){return{type:n.o,payload:!1}},i=function(){return{type:n.w,payload:!1}},l=function(e,t){var a=t.description,r=t.size,i=t.quantity,l=t.category,c=t.additional_details,d=t.attachment;return function(t){var s=new FormData;s.append("client_ref",e),s.append("size",r),s.append("category",l),s.append("quantity",i),s.append("description",a),s.append("additional_details",c),d&&d.map(function(e){return s.append("attachment[]",e,e.name)});t({type:n.E}),o.a.post("user/items",s,{headers:{"content-type":"multipart/form-data"}}).then(function(e){var a=e.data;a?(t({type:n.F}),t({type:n.Y,payload:a.item}),t({type:n.o,payload:!0})):(console.log("payload: data.error",a.error),t({type:n.D,payload:"Network Error"}))}).catch(function(e){t({type:n.D,payload:e.message}),console.log("Error****:",e.message)})}},c=function(e,t){var a=t.description,r=void 0===a?null:a,i=t.size,l=void 0===i?null:i,c=t.quantity,d=void 0===c?null:c,s=t.category,u=void 0===s?null:s,p=t.unit_cost,m=void 0===p?null:p,y=t.additional_details,f=void 0===y?null:y,g=t.attachment,h=void 0===g?null:g,b=t.open,v=void 0===b?null:b,E=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"admin/items/".concat(e):"user/items/".concat(e);return function(e){var t=new FormData;l&&t.append("size",l),null!==v&&t.append("open",v),u&&t.append("category",u),d&&t.append("quantity",d),m&&t.append("unit_cost",m),r&&t.append("description",r),f&&t.append("additional_details",f),h&&h.map(function(e){return t.append("attachment[]",e,e.name)});e({type:n.E}),o.a.put(E,t,{headers:{"content-type":"multipart/form-data"}}).then(function(t){var a=t.data;a?(e({type:n.F}),e({type:n.w,payload:a.item}),e({type:n.bb,payload:"Item updated successfully"})):(console.log("payload: data.error",a.error),e({type:n.D,payload:"Network Error"}))}).catch(function(t){e({type:n.D,payload:t.message}),console.log("Error****:",t.message)})}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e?"admin/items":"user/items";return function(e){e({type:n.J}),o.a.get(r,{headers:{"X-Requested-With":"XMLHttpRequest"},params:{s:t,c:a}}).then(function(t){var a=t.data;a?(e({type:n.L}),e({type:n.R}),e({type:n.f,payload:a.items})):(console.log("payload: data.error",a.error),e({type:n.C,payload:"Network Error"}))}).catch(function(t){e({type:n.C,payload:t.message}),console.log("Error****:",t.message)})}},s=function(e){return function(t){t({type:n.A}),o.a.get("admin/items/".concat(e,"/bids"),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){var a=e.data;a?(t({type:n.B}),t({type:n.O}),t({type:n.c,payload:a.bids})):(console.log("payload: data.error",a.error),t({type:n.z,payload:"Network Error"}))}).catch(function(e){t({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}},u=function(e){return function(t){o.a.post("user/items/".concat(e,"/skip")).then(function(a){var o=a.data;o?(t({type:n.ib,payload:e}),t({type:n.bb,payload:"Item skipped"})):(console.log("payload: data.error",o.error),t({type:n.D,payload:"Network Error"}))}).catch(function(e){t({type:n.D,payload:e.message}),console.log("Error****:",e.message)})}}},527:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"g",function(){return i}),a.d(t,"c",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return d}),a.d(t,"e",function(){return s}),a.d(t,"f",function(){return u}),a.d(t,"h",function(){return p}),a.d(t,"i",function(){return m});var n=a(2),o=a(37),r=function(e){return{type:n.k,payload:e}},i=function(e){return{type:n.u,payload:e}},l=function(){return{type:n.j}},c=function(){return{type:n.t}},d=function(e,t){var a=t.unit_cost,r=t.duration,i=t.additional_details;return function(t){t({type:n.A}),o.a.post("user/bids",{duration:r,additional_details:i,item_id:e,unit_cost:a}).then(function(a){var o=a.data;o?(t({type:n.B}),t({type:n.l,payload:e}),t({type:n.bb,payload:"Bid submitted successfully"})):(console.log("payload: data.error",o.error),t({type:n.z,payload:"Network Error"}))}).catch(function(e){t({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}},s=function(e){return function(t){o.a.delete("user/bids/".concat(e)).then(function(a){var o=a.data;o?(t({type:n.s,payload:e}),t({type:n.bb,payload:"Bid deleted"})):(console.log("payload: data.error",o.error),t({type:n.z,payload:"Network Error"}))}).catch(function(e){t({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}},u=function(e,t){var a=t.unit_cost,r=t.duration,i=t.additional_details;return function(t){t({type:n.A}),o.a.put("user/bids/".concat(e),{duration:r,additional_details:i,unit_cost:a}).then(function(e){var a=e.data;a?(t({type:n.B}),t({type:n.v,payload:a.bid}),t({type:n.bb,payload:"Bid edited successfully"})):(console.log("payload: data.error",a.error),t({type:n.z,payload:"Network Error"}))}).catch(function(e){t({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e?"admin/bids":"user/bids";return function(e){e({type:n.J}),o.a.get(r,{headers:{"X-Requested-With":"XMLHttpRequest"},params:{s:t,c:a}}).then(function(t){var a=t.data;a?(e({type:n.L}),e({type:n.O}),e({type:n.c,payload:a.bids})):(console.log("payload: data.error",a.error),e({type:n.C,payload:"Network Error"}))}).catch(function(t){e({type:n.C,payload:t.message}),console.log("Error****:",t.message)})}},m=function(e,t){return function(a){o.a.post("admin/items/".concat(e,"/bids/").concat(t,"/select")).then(function(e){var t=e.data;t?(a({type:n.B}),a({type:n.w,payload:t.item}),a({type:n.bb,payload:"Bid selected"})):(console.log("payload: data.error",t.error),a({type:n.z,payload:"Network Error"}))}).catch(function(e){a({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}}},612:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(859),i=a(76);t.a=function(e){return o.a.createElement(r.a,{className:"gx-card gx-text-center"},o.a.createElement(i.a,{image:i.a.PRESENTED_IMAGE_SIMPLE,description:o.a.createElement("span",null,"No ".concat(e||"data",", yet."))}))}},837:function(e,t,a){},856:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(472),i=a(473),l=a(12),c=a(13),d=a(16),s=a(14),u=a(150),p=a(15),m=a(10),y=a(858),f=a(17),g=a(467),h=a(458),b=a(653),v=a(95),E=a(18),k=a(844),w=(a(837),g.a.Item),O=h.a.TextArea,j=g.a.create({name:"form_in_modal"})(function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,r=e.item,i=e.confirmLoading,l=e.form.getFieldDecorator;return o.a.createElement(b.a,{visible:t,title:"Place a bid - ".concat(r.description),okText:"Create",onCancel:a,confirmLoading:i,onOk:n},o.a.createElement(g.a,{layout:"vertical"},o.a.createElement(w,{label:o.a.createElement("span",null,"Unit Cost\xa0",o.a.createElement(v.a,{title:"How much will one unit cost?"},o.a.createElement(E.a,{type:"question-circle-o"})))},l("unit_cost",{rules:[{required:!0,message:"Please input a unit cost!"}]})(o.a.createElement(k.a,{min:0,step:.01,formatter:function(e){return"\u20a6 ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\\u20a6\s?|(,*)/g,"")}}))),o.a.createElement(w,{label:o.a.createElement("span",null,"Duration\xa0",o.a.createElement(v.a,{title:"How long will it take to complete all?"},o.a.createElement(E.a,{type:"question-circle-o"})))},l("duration",{rules:[{required:!0,message:"Please input a duration!"}]})(o.a.createElement(k.a,{min:0}))),o.a.createElement(w,{label:o.a.createElement("span",null,"Additional details\xa0",o.a.createElement(v.a,{title:"Anything you'd like to add?"},o.a.createElement(E.a,{type:"question-circle-o"})))},l("additional_details",{rules:[]})(o.a.createElement(O,{rows:4,columns:2})))))}}]),t}(o.a.Component)),B=a(156),C=a(612),_=a(859),z=a(616),x=a(847),N=a(848),I=a(52),q=a(153),D=a.n(q),R=a(483),L=a.n(R),S=(a(613),a(547)),F=a.n(S),M=function(e){return e.slice(2+(e.lastIndexOf(".")-1>>>0))},A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).state={loading:!1},a.confirm=a.confirm.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({loading:!1})}},{key:"confirm",value:function(){var e=this.props,t=e.item,a=e.skipItem;this.setState({loading:!0}),a(t.id)}},{key:"render",value:function(){var e=this.props,t=e.item,a=e.addBid,n=this.state.loading;return o.a.createElement(_.a,{className:"gx-card",hoverable:!0,title:t.description,extra:o.a.createElement(z.a,{color:"#038fdd"},t.category)},o.a.createElement("div",{className:"gx-mb-2"},o.a.createElement("div",null,o.a.createElement(x.a,{size:"small",layout:"horizontal",column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1}},o.a.createElement(x.a.Item,{label:"Size/Type"},t.size),o.a.createElement(x.a.Item,{label:"Quantity"},t.quantity),o.a.createElement(x.a.Item,{label:"Details"},t.additional_details))),o.a.createElement("div",null,D.a.isEmpty(t.files)?null:o.a.createElement("div",null,t.files.map(function(e){return o.a.createElement(F.a,Object.assign({size:50,key:e.id,extension:M(e.name)},S.defaultStyles[M(e.name)]))})))),o.a.createElement("div",{className:"gx-mt-4"},o.a.createElement(N.a,{title:"Are you sure you want to skip this job?",onConfirm:this.confirm,okText:"Yes, forever",cancelText:"No, wait"},o.a.createElement(I.a,{type:"primary",loading:n,ghost:!0,size:"small"},"Skip")),o.a.createElement(I.a,{type:"primary",size:"small",onClick:function(){return a(t)}},"Place Bid")),o.a.createElement("small",{className:"gx-text-light gx-float-right"},"Updated ",o.a.createElement("i",null,o.a.createElement(L.a,{fromNow:!0},t.updated_at))))}}]),t}(n.Component),P=a(492),H=a(527),T=!0,X={y:440},J={position:"bottom"},W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).CreateNew=function(e){return o.a.createElement(o.a.Fragment,null)},a.saveFormRef=function(e){a.formRef=e},a.state={pagination:J,size:"middle",showHeader:T,visible:!1,item:null,rowSelection:{},scroll:X},a.createBid=a.createBid.bind(Object(u.a)(a)),a.handleCancel=a.handleCancel.bind(Object(u.a)(a)),a.handleCreateBid=a.handleCreateBid.bind(Object(u.a)(a)),a.saveFormRef=a.saveFormRef.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getItems()}},{key:"createBid",value:function(e){this.setState({item:e,visible:!0})}},{key:"handleCancel",value:function(){this.setState({item:null,visible:!1})}},{key:"handleCreateBid",value:function(){var e=this,t=this.formRef.props.form,a=this.props.item;t.validateFields(function(t,n){t||e.props.addBid(a.id,n)})}},{key:"render",value:function(){var e=this.props,t=e.addBidModal,a=e.cancelBidModal,n=e.bidLoading,r=e.item,i=e.items,l=e.loading,c=e.skipItem,d=e.visible;return o.a.createElement("div",null,o.a.createElement(m.b,{renderEmpty:function(){return Object(C.a)("jobs")}},o.a.createElement(y.a,{dataSource:i,itemLayout:"horizontal",grid:{gutter:15,column:3},loading:l,renderItem:function(e){return o.a.createElement(y.a.Item,null,o.a.createElement(A,{addBid:t,item:e,skipItem:c}))}}),r&&o.a.createElement(j,{wrappedComponentRef:this.saveFormRef,item:r,visible:d,onCancel:a,onCreate:this.handleCreateBid,confirmLoading:n})),o.a.createElement(B.a,null))}}]),t}(n.Component),U=Object(f.b)(function(e){var t=e.bidsData,a=e.commonData,n=e.itemsData,o=n.listSuccess,r=n.item,i=n.items,l=t.bidLoading,c=t.visible;return{bidLoading:l,item:r,items:i,listSuccess:o,loading:a.loading,visible:c}},{addBid:H.a,addBidModal:H.b,cancelBidModal:H.c,getItems:P.f,skipItem:P.g})(W);t.default=function(e){var t=e.match;return o.a.createElement(r.a,null,o.a.createElement(i.a,{exact:!0,path:"".concat(t.url,"/"),component:U}))}}}]);
//# sourceMappingURL=21.651103c6.chunk.js.map