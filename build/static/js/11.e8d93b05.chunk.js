(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{527:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"g",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return d}),a.d(t,"e",function(){return s}),a.d(t,"f",function(){return u}),a.d(t,"h",function(){return m}),a.d(t,"i",function(){return p});var n=a(2),i=a(37),l=function(e){return{type:n.k,payload:e}},o=function(e){return{type:n.u,payload:e}},r=function(){return{type:n.j}},c=function(){return{type:n.t}},d=function(e,t){var a=t.unit_cost,l=t.duration,o=t.additional_details;return function(t){t({type:n.A}),i.a.post("user/bids",{duration:l,additional_details:o,item_id:e,unit_cost:a}).then(function(a){var i=a.data;i?(t({type:n.B}),t({type:n.l,payload:e}),t({type:n.bb,payload:"Bid submitted successfully"})):(console.log("payload: data.error",i.error),t({type:n.z,payload:"Network Error"}))}).catch(function(e){t({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}},s=function(e){return function(t){i.a.delete("user/bids/".concat(e)).then(function(a){var i=a.data;i?(t({type:n.s,payload:e}),t({type:n.bb,payload:"Bid deleted"})):(console.log("payload: data.error",i.error),t({type:n.z,payload:"Network Error"}))}).catch(function(e){t({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}},u=function(e,t){var a=t.unit_cost,l=t.duration,o=t.additional_details;return function(t){t({type:n.A}),i.a.put("user/bids/".concat(e),{duration:l,additional_details:o,unit_cost:a}).then(function(e){var a=e.data;a?(t({type:n.B}),t({type:n.v,payload:a.bid}),t({type:n.bb,payload:"Bid edited successfully"})):(console.log("payload: data.error",a.error),t({type:n.z,payload:"Network Error"}))}).catch(function(e){t({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=e?"admin/bids":"user/bids";return function(e){e({type:n.J}),i.a.get(l,{headers:{"X-Requested-With":"XMLHttpRequest"},params:{s:t,c:a}}).then(function(t){var a=t.data;a?(e({type:n.L}),e({type:n.O}),e({type:n.c,payload:a.bids})):(console.log("payload: data.error",a.error),e({type:n.C,payload:"Network Error"}))}).catch(function(t){e({type:n.C,payload:t.message}),console.log("Error****:",t.message)})}},p=function(e,t){return function(a){i.a.post("admin/items/".concat(e,"/bids/").concat(t,"/select")).then(function(e){var t=e.data;t?(a({type:n.B}),a({type:n.w,payload:t.item}),a({type:n.bb,payload:"Bid selected"})):(console.log("payload: data.error",t.error),a({type:n.z,payload:"Network Error"}))}).catch(function(e){a({type:n.z,payload:e.message}),console.log("Error****:",e.message)})}}},612:function(e,t,a){"use strict";var n=a(0),i=a.n(n),l=a(859),o=a(76);t.a=function(e){return i.a.createElement(l.a,{className:"gx-card gx-text-center"},i.a.createElement(o.a,{image:o.a.PRESENTED_IMAGE_SIMPLE,description:i.a.createElement("span",null,"No ".concat(e||"data",", yet."))}))}},857:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(472),o=a(473),r=a(12),c=a(13),d=a(16),s=a(14),u=a(150),m=a(15),p=a(10),b=a(858),f=a(17),y=(a(613),a(3)),E=a(467),g=a(458),h=a(653),v=a(95),j=a(18),O=a(844),B=E.a.Item,k=g.a.TextArea,x=E.a.create({name:"form_in_modal",mapPropsToFields:function(e){return{unit_cost:E.a.createFormField(Object(y.a)({},e.bid,{value:e.bid.unit_cost})),duration:E.a.createFormField(Object(y.a)({},e.bid,{value:e.bid.duration})),additional_details:E.a.createFormField(Object(y.a)({},e.bid,{value:e.bid.additional_details}))}}})(function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onSave,l=e.bid,o=e.confirmLoading,r=e.form.getFieldDecorator;return i.a.createElement(h.a,{visible:t,title:"Edit bid - ".concat(l.item.description),okText:"Save",onCancel:a,confirmLoading:o,onOk:n},i.a.createElement(E.a,{layout:"vertical"},i.a.createElement(B,{label:i.a.createElement("span",null,"Unit Cost\xa0",i.a.createElement(v.a,{title:"How much will one unit cost?"},i.a.createElement(j.a,{type:"question-circle-o"})))},r("unit_cost",{rules:[{required:!0,message:"Please input a unit cost!"}]})(i.a.createElement(O.a,{min:0,step:.01,formatter:function(e){return"\u20a6 ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\\u20a6\s?|(,*)/g,"")}}))),i.a.createElement(B,{label:i.a.createElement("span",null,"Duration ",i.a.createElement("small",null,"(in days)"),"\xa0",i.a.createElement(v.a,{title:"How long will it take to complete all?"},i.a.createElement(j.a,{type:"question-circle-o"})))},r("duration",{rules:[{required:!0,message:"Please input a duration!"}]})(i.a.createElement(O.a,{min:0}))),i.a.createElement(B,{label:i.a.createElement("span",null,"Additional details\xa0",i.a.createElement(v.a,{title:"Anything you'd like to add?"},i.a.createElement(j.a,{type:"question-circle-o"})))},r("additional_details",{rules:[]})(i.a.createElement(k,{rows:4,columns:2})))))}}]),t}(i.a.Component)),w=a(156),_=a(612),C=a(527),z=a(154),S=a(847),N=a(859),F=a(616),T=a(848),I=a(52),L=a(153),R=a.n(L),D=a(483),q=a.n(D),M=a(547),A=a.n(M),P=function(e){return e.slice(2+(e.lastIndexOf(".")-1>>>0))},U=[{key:"job",tab:"Job"},{key:"bid",tab:"Bid"}],H=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).onTabChange=function(e,t){a.setState(Object(z.a)({},t,e))},a.state={key:"job",loading:!1},a.confirm=a.confirm.bind(Object(u.a)(a)),a.onTabChange=a.onTabChange.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(){this.setState({loading:!1})}},{key:"confirm",value:function(){var e=this.props,t=e.bid,a=e.deleteBid;this.setState({loading:!0}),a(t.id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.bid,n=t.editBid,l=this.state.key;return i.a.createElement(N.a,{className:"gx-card",hoverable:!0,title:a.item.description,extra:i.a.createElement(F.a,{color:"#038fdd"},a.item.category),tabList:U,activeTabKey:l,onTabChange:function(t){e.onTabChange(t,"key")}},function(e,t){switch(e){case"job":return i.a.createElement("div",{className:"gx-mb-2"},i.a.createElement("div",null,i.a.createElement(S.a,{size:"small",layout:"horizontal",column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1}},i.a.createElement(S.a.Item,{label:"Size/Type"},t.item.size),i.a.createElement(S.a.Item,{label:"Quantity"},t.item.quantity),i.a.createElement(S.a.Item,{label:"Details"},t.item.additional_details))),i.a.createElement("div",null,R.a.isEmpty(t.item.files)?null:i.a.createElement("div",null,t.item.files.map(function(e){return i.a.createElement(A.a,Object.assign({size:50,key:e.id,extension:P(e.name)},M.defaultStyles[P(e.name)]))}))));case"bid":return i.a.createElement("div",{className:"gx-mb-2"},i.a.createElement("div",null,i.a.createElement(S.a,{size:"small",layout:"horizontal",column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1}},i.a.createElement(S.a.Item,{label:"Unit Cost"},"\u20a6".concat(t.unit_cost)),i.a.createElement(S.a.Item,{label:"Duration"},"".concat(t.duration," days")),i.a.createElement(S.a.Item,{label:"Details"},t.additional_details))),i.a.createElement("div",null,R.a.isEmpty(t.item.files)?null:i.a.createElement("div",null,t.item.files.map(function(e){return i.a.createElement(A.a,Object.assign({size:50,key:e.id,extension:P(e.name)},M.defaultStyles[P(e.name)]))}))));default:return}}(l,a),i.a.createElement("div",{className:"gx-mt-4"},i.a.createElement(T.a,{title:"Are you sure you want to delete this bid?",onConfirm:this.confirm,okText:"Yes, forever",cancelText:"No, wait"},i.a.createElement(I.a,{type:"primary",ghost:!0,size:"small"},"Delete")),i.a.createElement(I.a,{type:"primary",size:"small",onClick:function(){return n(a)}},"Edit")),i.a.createElement("small",{className:"gx-text-light gx-float-right"},"Bid updated ",i.a.createElement("i",null,i.a.createElement(q.a,{fromNow:!0},a.updated_at))))}}]),t}(n.Component),J=!0,W={y:440},X={position:"bottom"},G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).saveFormRef=function(e){a.formRef=e},a.state={pagination:X,size:"middle",showHeader:J,rowSelection:{},scroll:W},a.createBid=a.createBid.bind(Object(u.a)(a)),a.handleCancel=a.handleCancel.bind(Object(u.a)(a)),a.handleUpdateBid=a.handleUpdateBid.bind(Object(u.a)(a)),a.saveFormRef=a.saveFormRef.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getBids()}},{key:"createBid",value:function(e){this.setState({item:e,visible:!0})}},{key:"handleCancel",value:function(){this.setState({item:null,visible:!1})}},{key:"handleUpdateBid",value:function(){var e=this,t=this.formRef.props.form,a=this.props.bid;t.validateFields(function(t,n){t||e.props.editBid(a.id,n)})}},{key:"render",value:function(){var e=this.props,t=e.deleteBid,a=e.editBidModal,n=e.cancelEditBidModal,l=e.bidLoading,o=e.bid,r=e.bids,c=e.loading,d=e.visible;return i.a.createElement("div",null,i.a.createElement(p.b,{renderEmpty:function(){return Object(_.a)("bids")}},i.a.createElement(b.a,{dataSource:r,itemLayout:"horizontal",grid:{gutter:15,column:3},loading:c,renderItem:function(e){return i.a.createElement(b.a.Item,null,i.a.createElement(H,{bid:e,editBid:a,deleteBid:t}))}}),o&&i.a.createElement(x,{wrappedComponentRef:this.saveFormRef,bid:o,visible:d,onCancel:n,onSave:this.handleUpdateBid,confirmLoading:l})),i.a.createElement(w.a,null))}}]),t}(n.Component),K=Object(f.b)(function(e){var t=e.bidsData,a=e.commonData,n=t.bid,i=t.bids,l=t.bidLoading,o=t.listSuccess,r=t.visible;return{bid:n,bids:i,bidLoading:l,listSuccess:o,loading:a.loading,visible:r}},{deleteBid:C.e,editBid:C.f,editBidModal:C.g,cancelEditBidModal:C.d,getBids:C.h})(G);t.default=function(e){var t=e.match;return i.a.createElement(l.a,null,i.a.createElement(o.a,{exact:!0,path:"".concat(t.url,"/"),component:K}))}}}]);
//# sourceMappingURL=11.e8d93b05.chunk.js.map